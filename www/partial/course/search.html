<ion-view class="course-search" ng-controller="CourseSearchController">
    <ion-nav-buttons side="center">
        <button class="button button-icon icon ion-ios-arrow-left" ng-click="goBack()"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button button-icon icon ion-android-cart" ng-click="goCart()"></button>
        <div class="cart-badge-container" ng-show="carts.length > 0" ng-click="goCart()">
            <div class="badge badge-assertive badge-s-size cart-badge">{{carts.length}}</div>
        </div>
    </ion-nav-buttons>
    <ion-nav-title>
        <h1 class="title">{{ pageTitle }}</h1>
    </ion-nav-title>
    <ion-content class="has-header" padding="false" scroll="false" ng-class="{'pane-content': true}">
        <div class="list header">
            <div class="item item-input-inset">
                <label class="item-input-wrapper">
                    <input type="text" placeholder="{{ placeholderKeyword }}" class="item-input-keyword" ng-model="keyword">
                </label>
                <button class="button button-icon icon ion-android-search button-search" ng-click="goSearch(keyword)"></button>
                <button class="button button-icon icon ion-android-options button-options" ng-click="setOptions($event)"></button>
            </div>
        </div>
        <ion-content class="has-subheader" padding="false" scroll="true">
            <div class="card" ng-repeat="course in courses" ng-click="switchToCourseInfo(course.Shop_Id, course.Prod_Id)">
                <div class="item item-text-wrap">
                    <div class="row">
                        <div class="col course-no">{{course.Prod_Id}}</div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="course-date">
                                <div class="year">{{course.year}}</div>
                                <div class="date">{{course.date}}</div>
                                <div class="weekday">{{course.weekday}}</div>
                            </div>
                        </div>
                        <div class="col col-80">
                            <div class="course-title">
                                {{course.Prod_Name}} {{course.Prod_SubName}}
                            </div>
                            <div class="course-detail">
                                <p>上課地點： {{course.Prod_ClsLocation}}</p>
                                <p>上課時數： {{course.Prod_ClsHours}}</p>
                                <p>上課時段： {{course.Prod_ClsTime}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-20">
                            <span class="special-price-mark">優惠價</span>
                        </div>
                        <div class="col col-70">
                            NT<span class="course-price">{{course.Prod_Price | currency:undefined:0}}</span>
                        </div>
                        <div class="col text-right">
                            <img class="course-keep-img" ng-src="img/{{course.keep_image_name}}"
                                 ng-click="addOrRemoveFromWish(course, $event)" />
                        </div>
                    </div>
                </div>
            </div>
            <ion-infinite-scroll
                ng-if="!noMoreItemsAvailable"
                on-infinite="loadMore()"
                distance="1%">
            </ion-infinite-scroll>
        </ion-content>
    </ion-content>
    <script id="templates/popover.html" type="text/ng-template">
        <ion-popover-view custom-pop-over="list" custom-pop-over-width="98%">
            <ion-content>
                <div class="list">
                    <a class="item" href="http://learn.ionicframework.com/" target="_blank">
                        Learn Ionic
                    </a>
                    <a class="item" href="http://ionicframework.com/docs/" target="_blank">
                        Documentation
                    </a>
                    <a class="item" href="http://showcase.ionicframework.com/" target="_blank">
                        Showcase
                    </a>
                    <a class="item" href="http://ionicframework.com/submit-issue/" target="_blank">
                        Submit an Issue
                    </a>
                    <a class="item" href="https://github.com/driftyco/ionic" target="_blank">
                        Github Repo
                    </a>
                </div>
            </ion-content>
        </ion-popover-view>
    </script>
</ion-view>