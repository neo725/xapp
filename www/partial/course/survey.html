<ion-view class="course-survey" ng-controller="CourseSurveyController">
    <ion-nav-bar>
        <ion-nav-buttons side="left">
            <button class="button button-icon icon ion-ios-arrow-left" ng-click="goBack()"></button>
        </ion-nav-buttons>
        <ion-nav-buttons side="right">
            <button class="button button-icon icon sprite-icon shoppingcar-icon" ng-click="goCart()">
                <i class="sprite-icon-shoppingcar-o-2x"></i>
            </button>
            <div class="cart-badge-container" ng-show="carts.length > 0" ng-click="goCart()">
                <div class="badge badge-assertive badge-s-size cart-badge" ng-bind="carts.length"></div>
            </div>
        </ion-nav-buttons>
        <ion-nav-title>
            <h1 class="title">滿意度問卷</h1>
        </ion-nav-title>
    </ion-nav-bar>
    <ion-content class="course-survey-content" padding="true">
        <h3 ng-bind="course.Prod_Name"></h3>
        <div class="list" ng-if="false">
            <div class="survey-item" ng-repeat="topic in topics track by topic.Topic_No">
                <div class="item item-divider">
                    {{ topic.Topic_Name }}
                </div>
                <ion-radio ng-repeat="item in topic.events"
                           ng-value="item.Event_Value"
                           ng-model="topic.event_value"
                           ng-change="changeTopicEvent(topic)">
                    {{ item.Event_Value }}
                </ion-radio>
                <div class="list checkbox-list" ng-if="false">
                    <div class="item">
                        請勾選不滿意的項目(可複選)
                    </div>
                    <ion-checkbox ng-repeat="item in devList"
                                  ng-model="item.checked"
                                  ng-checked="item.checked">
                        {{ item.text }}
                    </ion-checkbox>
                </div>
            </div>
        </div>
        <ion-list class="survey-list">
            <ion-item class="survey-item" ng-repeat="topic in topics track by topic.Topic_No">
                <ion-label>{{ topic.Topic_Name }}</ion-label>
                <ion-radio ng-if="topic.Topic_Type == '單選'"
                           ng-repeat="item in topic.events"
                           ng-model="topic.event_value"
                           ng-change="changeTopicEvent(topic, item)"
                           ng-value="item.Event_Value">
                    <i ng-class="{ 'ion-android-radio-button-on': topic.event_value == item.Event_Value,
                                   'ion-android-radio-button-off': topic.event_value != item.Event_Value }"></i>
                    <span class="radio-title" ng-bind="item.Event_Value"></span>
                </ion-radio>
                <ion-checkbox ng-if="topic.Topic_Type == '複選'"
                              ng-repeat="item in topic.events"
                              ng-model="item.checked"
                              ng-change="changeTopicEvent(topic, item)">
                    <span class="checkbox-title" ng-bind="item.Event_Value"></span>
                </ion-checkbox>
                <div class="sub-survey-item"
                     ng-if="topic.sub_topics && topic.sub_topics.length > 0"
                     ng-repeat="sub_topic in topic.sub_topics track by sub_topic.Topic_No">
                    <ion-label>{{ sub_topic.Topic_Name }}</ion-label>
                    <ion-checkbox ng-repeat="item in sub_topic.events"
                                  ng-model="item.checked"
                                  ng-value="item.Event_Value"
                                  ng-change="changeSubTopicEvent(sub_topic, item)">
                        <span class="checkbox-title" ng-bind="item.Event_Value"></span>
                    </ion-checkbox>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>